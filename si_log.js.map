{"version":3,"file":null,"sources":["src/appenders/console.js","src/appenders/index.js","src/config.js","src/utils.js","src/Log.js","src/index.js"],"sourcesContent":["import {\n  slice\n} from '../utils'\nexport default function (options) {\n  return function (logInfo) {\n    var args = slice(logInfo.args)\n    args.unshift('[' + logInfo.name + ']' + (options.printTime ? '[' + logInfo.timeStr + ']' : '') + ':')\n    let level = logInfo.level\n    if (level === 'debug') level = 'log'\n    if (console) console[level].apply(console, args)\n  }\n}\n","import consoleAppender from './console'\nlet appenderMap = {}\nexport const register = function (name, appender) {\n  appenderMap[name] = {}\n}\n\nexport let appenders = []\nexport const generate = function (config) {\n  clear(appenders)\n  if (!config) {\n    return appenders.push(consoleAppender({printTime: false}))\n  }\n  for (let key in config) {\n    if (!appenderMap[key]) continue\n    appenders.push(appenderMap[key](config[key]))\n  }\n  return appenders\n}\n\nfunction clear (arr) {\n  if (!arr || arr.length === 0) return\n\n  for (let i = 0; i < arr.length; i++) {\n    arr.splice(i, 1)\n    i--\n  }\n}\n\nregister('console', consoleAppender)\n","export default {\n  level: true,\n  throwError: false,\n  appenders: {\n    console: {\n      printTime: true\n    }\n  }\n}\n","export const each = function (loopable, callback) {\n  if (loopable) {\n    if (loopable.length === +loopable.length && loopable.length - 1 in loopable) {\n      let i\n      for (i = 0; i < loopable.length; i++) {\n        if (callback.call(loopable[i], loopable[i], i) === false) break\n      }\n    } else {\n      for (let key in loopable) {\n        if (callback.call(loopable[key], loopable[key], key) === false) break\n      }\n    }\n  }\n}\n\nexport const isArray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\n\nexport const getNowStr = function () {\n  var now = new Date()\n  var year = now.getFullYear()\n  var month = now.getMonth() + 1\n  var day = now.getDate()\n  var hour = now.getHours()\n  var min = now.getMinutes()\n  var second = now.getSeconds()\n  return year + '-' + fillZero(month) + '-' + fillZero(day) + ' ' + fillZero(hour) + ':' + fillZero(min) + ':' + fillZero(second)\n}\n\nexport const fillZero = function (num) {\n  return num > 9 ? String(num) : '0' + String(num)\n}\n\nexport const eqOrIn = function (target, dest) {\n  if (target === dest) return true\n  if (!isArray(target)) return false\n  var flag = false\n  each(target, function (level) {\n    if (dest === level) return !(flag = true)\n  })\n  return flag\n}\n\nexport const slice = function (arr, start, end) {\n  var newArr = []\n  if (!arr) return newArr\n  if (!start) start = 0\n  if (!end || end > arr.length - 1) end = arr.length - 1\n  for (var i = 0; i < arr.length; i++) {\n    if (i < start) continue\n    if (i > end) break\n    newArr.push(arr[i])\n  }\n  return newArr\n}\n","import config from './config'\nimport {\n  eqOrIn,\n  getNowStr,\n  slice\n} from './utils'\n\nimport {appenders} from './appenders'\nexport default class Log {\n\n  constructor (name) {\n    this.name = name\n  }\n\n  debug () {\n    this._print('debug', arguments)\n    return this\n  }\n\n  info () {\n    this._print('info', arguments)\n    return this\n  }\n\n  warn () {\n    this._print('warn', arguments)\n    return this\n  }\n\n  error () {\n    if (config.throwError) {\n      throw new Error(arguments)\n    } else {\n      this._print('error', arguments)\n    }\n    return this\n  }\n\n  _print (level, args) {\n    if (!this._canLog(level)) return\n    args = slice(args)\n    let obj = {\n      time: getNowStr(),\n      name: this.name,\n      args: args,\n      level: level\n    }\n    if (appenders && appenders.length > 0) {\n      for (let i = 0; i < appenders.length; i++) {\n        appenders[i](obj)\n      }\n    }\n  }\n\n  _canLog (level) {\n    if (!config.level || (config.level !== true && !eqOrIn(config.level, level))) return false\n    return true\n  }\n}\n","import Log from './Log'\nimport config from './config'\nimport {register, generate} from './appenders'\ngenerate()\n\nlet log = new Log('log.js')\n\nlog.version = '0.2.0'\n\nlog._config = config\n\nlog.config = function (op) {\n  if (!op) return\n  for (var key in op) {\n    if (config[key] !== undefined) config[key] = op[key]\n  }\n  if (op.appenders) generate()\n}\n\nlog.appender = register\nlog.generate = generate\n\nlog.create = function (name) {\n  if (!name) log.warn('please input name')\n  return new Log(name || 'null')\n}\n\nexport default log\n"],"names":["options","logInfo","args","slice","unshift","name","printTime","timeStr","level","console","apply","clear","arr","length","i","splice","each","loopable","callback","call","key","isArray","Array","Object","prototype","toString","getNowStr","now","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","min","getMinutes","second","getSeconds","fillZero","num","String","eqOrIn","target","dest","flag","start","end","newArr","push","appenderMap","register","appender","appenders","generate","config","consoleAppender","Log","_print","arguments","this","throwError","Error","_canLog","obj","log","version","_config","op","undefined","create","warn"],"mappings":"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"}